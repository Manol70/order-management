{% extends 'base.html.twig' %}

{% block title %}Hello ReferenceController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
<a href="/order"><input type="button" class="btn btn-success" value="НАЧАЛО" data-turbo-frame="orders_frame"></a>   

    <div class="search-form-container">
    {{ form_start(searchForm) }}
    
    <div class="form-row">
        <div class="form-group hidden-field">
            {{ form_label(searchForm.customer) }}
            {{ form_widget(searchForm.customer, {'attr': {'class': 'form-control'}}) }}
        </div>
        <div class="form-group hidden-field">
            {{ form_label(searchForm.type) }}
            {{ form_widget(searchForm.type, {'attr': {'class': 'form-control'}}) }}
        </div>
        <div class="form-group hidden-field">
            {{ form_label(searchForm.status) }}
            {{ form_widget(searchForm.status, {'attr': {'class': 'form-control'}}) }}
        </div>
        <div class="form-group hidden-field">
            {{ form_label(searchForm.glass) }}
            {{ form_widget(searchForm.glass, {'attr': {'class': 'form-control'}}) }}
        </div>
        <div class="form-group hidden-field">
            {{ form_label(searchForm.detail) }}
            {{ form_widget(searchForm.detail, {'attr': {'class': 'form-control'}}) }}
        </div>
        <div class="form-group hidden-field">
            {{ form_label(searchForm.mosquito) }}
            {{ form_widget(searchForm.mosquito, {'attr': {'class': 'form-control'}}) }}
        </div>
         <div class="form-field">
            {{ form_label(searchForm.from_date) }}
            {{ form_widget(searchForm.from_date, {'attr': {'class': 'form-control'}}) }}
        </div>
         <div class="form-field">
            {{ form_label(searchForm.to_date) }}
            {{ form_widget(searchForm.to_date, {'attr': {'class': 'form-control'}}) }}
        </div>
    </div>
    
    <button type="submit" class="btn btn-primary">Виж</button> 
    {{ form_end(searchForm) }}
</div>
</div>

{% if fromDate != null %}
<h1> СПРАВКА ЗА ПЕРИОДА {{ fromDate }} - {{ toDate  }} </h1>
<table>
    <thead>
        <tr>
        <th>Брой поръчки</th>
        <th>Квадратура</th>
        <th>Обща сума</th>
        <th>Платено</th>
        <th>Неплатено</th>
        </tr>
        <tr>
        <td> {{ totalOrders }} </td>
        <td> {{ totalQuadrature }} </td>
        <td> {{ totalAmount }} </td>
        <td> {{ totalPaid }} </td>
        <td> {{ totalAmount - totalPaid }}</td>
        </tr>
    </thead>
</table>

<div class="tables-container">
    <div class="table-wrapper">
        <table>
            <thead>
            <th colspan="2"> Топ 10 оборота </th>
            </thead>
             {% for customer in topTurnover %}
             <tr>
             <td> {{ customer.totalRevenue }} </td>
             <td> {{ customer.customerName }} </td>
             </tr>
             {% endfor %}
        </table>
    </div>

    <div class="table-wrapper">
        <table>
            <thead>
            <th colspan="2"> Топ 10 квадратури </th>
            </thead>
             {% for customer in topQuadratureByCustomer %}
             <tr>
             <td> {{ customer.totalQuadrature }} </td>
             <td> {{ customer.customerName }} </td>
             </tr>
             {% endfor %}
        </table>
    </div>

    <div class="table-wrapper">
        <table>
            <thead>
            <th colspan="2"> Топ 10 по брой поръчки </th>
            </thead>
             {% for customer in topCountOrderByCustomer %}
             <tr>
             <td> {{ customer.orderCount }} </td>
             <td> {{ customer.customerName }} </td>
             </tr>
             {% endfor %}
        </table>
    </div>
</div>
{% endif %}
{% endblock %}
